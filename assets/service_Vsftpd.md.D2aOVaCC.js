import{_ as e,c as a,o as s,a2 as t}from"./chunks/framework.BJ4bFU3Q.js";const m=JSON.parse('{"title":"vsftpd","description":"","frontmatter":{},"headers":[],"relativePath":"service/Vsftpd.md","filePath":"service/Vsftpd.md"}'),r={name:"service/Vsftpd.md"},o=t('<h1 id="vsftpd" tabindex="-1">vsftpd <a class="header-anchor" href="#vsftpd" aria-label="Permalink to &quot;vsftpd&quot;">​</a></h1><h2 id="安装-vsftpd" tabindex="-1">安装 vsftpd <a class="header-anchor" href="#安装-vsftpd" aria-label="Permalink to &quot;安装 vsftpd&quot;">​</a></h2><p><code>yum install vsftpd</code></p><h2 id="创建映射用户" tabindex="-1">创建映射用户 <a class="header-anchor" href="#创建映射用户" aria-label="Permalink to &quot;创建映射用户&quot;">​</a></h2><p><code>mkdir -p /data/ftproot</code><br><code>useradd -d /data/ftproot vusers -s /sbin/nologin</code><br><code>chown -R vusers:vusers /data/ftproot</code></p><h2 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h2><p><code>cd /etc/vsftpd</code><br><code>touch chroot_list</code><br><code>vim vsftpd.conf</code></p><details class="details custom-block"><summary>Details</summary><p>listen=YES<br> local_enable=YES<br> listen_ipv6=NO<br> chroot_local_user=YES<br> chroot_list_enable=YES<br> chroot_list_file=/etc/vsftpd/chroot_list<br> pam_service_name=vsftpd<br> virtual_use_local_privs=YES<br> guest_enable=YES<br> guest_username=vusers<br> pasv_enable=YES<br> pasv_min_port=30100<br> pasv_max_port=30200<br> pasv_address=192.168.x.x<br> reverse_lookup_enable=NO<br> user_config_dir=/etc/vsftpd/vuser_conf</p></details><p><code>mkdir vuser_conf</code><br><code>vim vuser_conf/vuser1</code></p><details class="details custom-block"><summary>Details</summary><p>local_root=/data/ftproot/vuser1<br> allow_writeable_chroot=YES<br> anon_upload_enable=YES<br> anon_world_readable_only=NO<br> anon_mkdir_write_enable=YES<br> anon_other_write_enable=YES</p></details><h2 id="创建虚拟用户" tabindex="-1">创建虚拟用户 <a class="header-anchor" href="#创建虚拟用户" aria-label="Permalink to &quot;创建虚拟用户&quot;">​</a></h2><p><code>vim vuserlist</code></p><details class="details custom-block"><summary>Details</summary><p>vuser1 #用户名<br> password #密码</p></details><p><code>db_load -T -t hash -f vuserlist vuserlist.db</code><br><code>chmod 600 vuserlist.db</code><br><code>vim /etc/pam.d/vsftpd</code></p><details class="details custom-block"><summary>Details</summary><p># 注释所有行，添加以下行<br> auth required /lib64/security/pam_userdb.so db=/etc/vsftpd/vuserlist<br> account required /lib64/security/pam_userdb.so db=/etc/vsftpd/vuserlist</p></details><h2 id="重启服务" tabindex="-1">重启服务 <a class="header-anchor" href="#重启服务" aria-label="Permalink to &quot;重启服务&quot;">​</a></h2><p><code>systemctl restart vsftpd</code></p>',17),d=[o];function c(l,i,p,_,n,b){return s(),a("div",null,d)}const v=e(r,[["render",c]]);export{m as __pageData,v as default};
