import{_ as s,c as a,o as i,a3 as e}from"./chunks/framework.asm4Y-uW.js";const g=JSON.parse('{"title":"MySQL基础","description":"","frontmatter":{},"headers":[],"relativePath":"service/MySQL.md","filePath":"service/MySQL.md"}'),t={name:"service/MySQL.md"},l=e(`<h1 id="mysql基础" tabindex="-1">MySQL基础 <a class="header-anchor" href="#mysql基础" aria-label="Permalink to &quot;MySQL基础&quot;">​</a></h1><h2 id="docker搭建mysql" tabindex="-1">docker搭建MySQL <a class="header-anchor" href="#docker搭建mysql" aria-label="Permalink to &quot;docker搭建MySQL&quot;">​</a></h2><p><code>docker run -d --name mysql --restart=always -e TZ=Asia/Shanghai -v /etc/localtime:/etc/localtime -v /mydata/mysql/data:/var/lib/mysql -v /mydata/mysql/conf:/etc/mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=smile mysql:latest</code></p><h3 id="docker部署mysql性能会下降吗" tabindex="-1">docker部署MySQL性能会下降吗 <a class="header-anchor" href="#docker部署mysql性能会下降吗" aria-label="Permalink to &quot;docker部署MySQL性能会下降吗&quot;">​</a></h3><blockquote><p><strong>并没有多大影响</strong>，<em><a href="https://dev.mysql.com/blog-archive/mysql-with-docker-performance-characteristics/" target="_blank" rel="noreferrer">链接</a></em></p></blockquote><h2 id="mysql修改密码" tabindex="-1">MySQL修改密码 <a class="header-anchor" href="#mysql修改密码" aria-label="Permalink to &quot;MySQL修改密码&quot;">​</a></h2><h3 id="首次修改密码" tabindex="-1">首次修改密码 <a class="header-anchor" href="#首次修改密码" aria-label="Permalink to &quot;首次修改密码&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">alter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@&#39;localhost&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> identified</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;***&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h3 id="后续修改密码" tabindex="-1">后续修改密码 <a class="header-anchor" href="#后续修改密码" aria-label="Permalink to &quot;后续修改密码&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@&#39;localhost&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;***&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="忘记密码修改" tabindex="-1">忘记密码修改 <a class="header-anchor" href="#忘记密码修改" aria-label="Permalink to &quot;忘记密码修改&quot;">​</a></h3><p>配置文件增加</p><ul><li>skip-grant-tables = 1</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">update</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql.user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> authentication_string=password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&#39;***&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">where</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user=&#39;root&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> host=&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><hr><h2 id="备份与还原" tabindex="-1">备份与还原 <a class="header-anchor" href="#备份与还原" aria-label="Permalink to &quot;备份与还原&quot;">​</a></h2><h3 id="完全备份" tabindex="-1">完全备份 <a class="header-anchor" href="#完全备份" aria-label="Permalink to &quot;完全备份&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">innobackupex</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --default-file=conf_DIR</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --datadir=DB_DIR</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user=root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --password=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;smile&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --host=127.0.0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [--databases=DB] --backup BACK_DIR</span></span></code></pre></div><p>压缩：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--compress</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --compress-threads=5</span></span></code></pre></div><p>解压：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">innobackupex</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --decompress</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BACK_DIR</span></span></code></pre></div><h3 id="还原" tabindex="-1">还原 <a class="header-anchor" href="#还原" aria-label="Permalink to &quot;还原&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">innobackupex</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --apply-log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BACK_DIR</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">innobackupex</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --copy-back</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --datadir=DB_DIR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BACK_DIR</span></span></code></pre></div><h3 id="增量备份" tabindex="-1">增量备份 <a class="header-anchor" href="#增量备份" aria-label="Permalink to &quot;增量备份&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">innobackupex</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --default-file=conf_DIR</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --datadir=DB_DIR</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user=root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --password=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;smile&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --incremental</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BACK_DIR</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --incremental-basedir=BACK_DIR/Fullbackdir</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">innobackupex</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --default-file=conf_DIR</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --datadir=DB_DIR</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user=root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --password=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;smile&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --incremental</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BACK_DIR</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --incremental-basedir=BACK_DIR/Incrementaldir1</span></span></code></pre></div>`,27),h=[l];function n(p,k,r,d,o,c){return i(),a("div",null,h)}const y=s(t,[["render",n]]);export{g as __pageData,y as default};
