import{_ as a,c as s,o as i,a3 as e}from"./chunks/framework.BM2i9-bh.js";const y=JSON.parse('{"title":"已有PHP项目搭建","description":"","frontmatter":{},"headers":[],"relativePath":"service/pomelo.md","filePath":"service/pomelo.md"}'),t={name:"service/pomelo.md"},l=e(`<h1 id="已有php项目搭建" tabindex="-1">已有PHP项目搭建 <a class="header-anchor" href="#已有php项目搭建" aria-label="Permalink to &quot;已有PHP项目搭建&quot;">​</a></h1><h2 id="_1-拉取代码" tabindex="-1">1.拉取代码 <a class="header-anchor" href="#_1-拉取代码" aria-label="Permalink to &quot;1.拉取代码&quot;">​</a></h2><p><em><strong>将四个项目放在同一目录下</strong></em></p><ul><li>Admin (<a href="http://172.16.1.22/php/admin.git" target="_blank" rel="noreferrer">http://172.16.1.22/php/admin.git</a>)</li><li>Merchant (<a href="http://172.16.1.22/php/merchant.git" target="_blank" rel="noreferrer">http://172.16.1.22/php/merchant.git</a>)</li><li>Gateway (<a href="http://172.16.1.22/php/gateway.git" target="_blank" rel="noreferrer">http://172.16.1.22/php/gateway.git</a>)</li><li>Docker (<a href="http://172.16.1.22/php/docker.git" target="_blank" rel="noreferrer">http://172.16.1.22/php/docker.git</a>)</li></ul><h2 id="_2-修改配置文件" tabindex="-1">2.修改配置文件 <a class="header-anchor" href="#_2-修改配置文件" aria-label="Permalink to &quot;2.修改配置文件&quot;">​</a></h2><ul><li><p>Admin<br> -- admin/yafapp/conf/app.ini<br> -- admin/yafapp/conf/database.ini</p></li><li><p>Merchant<br> -- merchant/yafapp/conf/app.ini<br> -- merchant/yafapp/conf/database.ini</p></li><li><p>Gateway<br> -- gateway/yafapp/conf/app.ini<br> -- gateway/yafapp/conf/database.ini</p></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>如果连接服务器的MySQL和Redis，3/4步骤可以不用做</p></div><h2 id="_3-启动mysql服务" tabindex="-1"><s>3.启动MySQL服务</s> <a class="header-anchor" href="#_3-启动mysql服务" aria-label="Permalink to &quot;~~3.启动MySQL服务~~&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql:5.7</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /Users/one/dev/mysql/data:/var/lib/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /Users/one/dev/mysql/conf/my.cnf:/etc/mysql/my.cnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3306:3306</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MYSQL_ROOT_PASSWORD=abc123</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql:5.7</span></span></code></pre></div><p><em>数据库文件<strong>polemo.sql</strong>在企业微信微盘里</em></p><h2 id="_4-启动redis服务" tabindex="-1"><s>4.启动Redis服务</s> <a class="header-anchor" href="#_4-启动redis服务" aria-label="Permalink to &quot;~~4.启动Redis服务~~&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 6379:6379</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /Users/one/dev/redis/data:/data</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /Users/one/dev/redis/conf/redis.conf:/etc/redis/redis.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis:latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/redis/redis.conf</span></span></code></pre></div><h2 id="_5-打包镜像" tabindex="-1">5.打包镜像 <a class="header-anchor" href="#_5-打包镜像" aria-label="Permalink to &quot;5.打包镜像&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> paymole:latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><h2 id="_6-启动容器" tabindex="-1">6.启动容器 <a class="header-anchor" href="#_6-启动容器" aria-label="Permalink to &quot;6.启动容器&quot;">​</a></h2><p><code>docker-compose -f docker-compose.yml up -d</code></p><h2 id="_7-修改hosts" tabindex="-1">7.修改hosts <a class="header-anchor" href="#_7-修改hosts" aria-label="Permalink to &quot;7.修改hosts&quot;">​</a></h2><p><code>sudo vim /etc/hosts</code></p><details class="details custom-block"><summary>Details</summary><p>127.0.0.1 admin.paymole.test<br> 127.0.0.1 merchant.paymole.test<br> 127.0.0.1 api.paymole.test<br> 127.0.0.1 data.paymole.test<br> 127.0.0.1 sandbox.paymole.test<br> 127.0.0.1 pay.paymole.test</p></details><h2 id="_8-浏览器访问" tabindex="-1">8.浏览器访问 <a class="header-anchor" href="#_8-浏览器访问" aria-label="Permalink to &quot;8.浏览器访问&quot;">​</a></h2><ul><li>Admin: <a href="http://admin.paymole.test" target="_blank" rel="noreferrer">http://admin.paymole.test</a></li><li>Merchant: <a href="http://merchant.paymole.test" target="_blank" rel="noreferrer">http://merchant.paymole.test</a></li></ul>`,21),h=[l];function n(p,r,d,k,o,c){return i(),s("div",null,h)}const m=a(t,[["render",n]]);export{y as __pageData,m as default};
